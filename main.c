/*
 * main.c
 */

#include "msp430g2553.h"

#define SET_RST		P2OUT|=BIT5
#define CLR_RST		P2OUT&=~BIT5
#define SET_CSB		P2OUT|=BIT4
#define CLR_CSB		P2OUT&=~BIT4

const char Slave = 0x7E;
const char Comsend = 0x00;
const char Datasend = 0x40;




/*****************************************************/

const unsigned char Init_Vector1[] =            // 16 Point 16-bit Sine Table
{
	0xA2,
	0xAE,
	0x48,	// Set Duty ratio
	0x80, 	// nop
	0xA0,	// Set scan direction
	0xC8,	// SHL select
	0x40,	// initial Com0 register
	0x00,	// scan from Com0
	0xAB,	// OSC on
	0x64	// 3x
};

	// delay(2);

const unsigned char Init_Vector2[] =            // 16 Point 16-bit Sine Table
{
	0x65	// 4x
};
	//  delay(2);

const unsigned char Init_Vector3[] =            // 16 Point 16-bit Sine Table
{
	0x66	// 5x
};
	// delay(2);

const unsigned char Init_Vector4[] =            // 16 Point 16-bit Sine Table
{
	0x67	// 5x
};
	// delay(2);

const unsigned char Init_Vector5[] =            // 16 Point 16-bit Sine Table
{
	0x27,
	0x81,
	12,
	0x50,	//0x57,
	0x92,	// frc and pwm
	0x2C
};

	// delay(200);
const unsigned char Init_Vector6[] =            // 16 Point 16-bit Sine Table
{
	0x2E
};

	// delay(200);

const unsigned char Init_Vector7[] =            // 16 Point 16-bit Sine Table
{

	0x2F
};

// delay(200);

const unsigned char Init_Vector8[] =            // 16 Point 16-bit Sine Table
{
	0x92,
	0x38,
	0x75,
	0x97,	// 3frc, 45 pwm
	0x80,	// start 16-level grayscale settings
	0x00,
	0x81,
	0x00,
	0x82,
	0x00,
	0x83,
	0x00,
	0x84,
	0x06,
	0x85,
	0x06,
	0x86,
	0x06,
	0x87,
	0x06,
	0x88,
	0x0B,
	0x89,
	0x0B,
	0x8A,
	0x0B,
	0x8B,
	0x0B,
	0x8C,
	0x10,
	0x8D,
	0x10,
	0x8E,
	0x10,
	0x8F,
	0x10,
	0x90,
	0x15,
	0x91,
	0x15,
	0x92,
	0x15,
	0x93,
	0x15,
	0x94,
	0x1A,
	0x95,
	0x1A,
	0x96,
	0x1A,
	0x97,
	0x1A,
	0x98,
	0x1E,
	0x99,
	0x1E,
	0x9A,
	0x1E,
	0x9B,
	0x1E,
	0x9C,
	0x23,
	0x9D,
	0x23,
	0x9E,
	0x23,
	0x9F,
	0x23,
	0xA0,
	0x27,
	0xA1,
	0x27,
	0xA2,
	0x27,
	0xA3,
	0x27,
	0xA4,
	0x2B,
	0xA5,
	0x2B,
	0xA6,
	0x2B,
	0xA7,
	0x2B,
	0xA8,
	0x2F,
	0xA9,
	0x2F,
	0xAA,
	0x2F,
	0xAB,
	0x2F,
	0xAC,
	0x32,
	0xAD,
	0x32,
	0xAE,
	0x32,
	0xAF,
	0x32,
	0xB0,
	0x35,
	0xB1,
	0x35,
	0xB2,
	0x35,
	0xB3,
	0x35,
	0xB4,
	0x38,
	0xB5,
	0x38,
	0xB6,
	0x38,
	0xB7,
	0x38,
	0xB8,
	0x3A,
	0xB9,
	0x3A,
	0xBA,
	0x3A,
	0xBB,
	0x3A,
	0xBC,
	0x3C,
	0xBD,
	0x3C,
	0xBE,
	0x3C,
	0xBF,
	0x3C,	// end grayscale settings
	0x38,
	0x74,
	0xAF 	// display on

};


/*
const unsigned char Init_Vector[] =            // 16 Point 16-bit Sine Table
{
	0x48,	// partial display duty ratio
	0x64, 	// 1/100 duty
	0xA0,	// ADC select
	0xC8,	// SHL select
	0x44,	// initial Com0 register
	0x00,	// scan from Com0
	0xAB,	// OSC on
	0x26,
	0x81,	// set electronic volume
	0x15,	// vopcode=0x1C
	0x56,	// set 1/11 bias
	0x64,	// 3x
			// delay(2);
	0x2C,
	0x66,	// 5x
			// delay(2);
	0x2E,
			// delay(2);
	0x2F,	// power control
	0xF3,	// bias save circuit
	0x00,
	0x96,	// frc and pwm
	0x38,	// external mode
	0x75,
	0x97,	// 3frc, 45 pwm
	0x80,	// start 16-level grayscale settings
	0x00,
	0x81,
	0x00,
	0x82,
	0x00,
	0x83,
	0x00,
	0x84,
	0x06,
	0x85,
	0x06,
	0x86,
	0x06,
	0x87,
	0x06,
	0x88,
	0x0B,
	0x89,
	0x0B,
	0x8A,
	0x0B,
	0x8B,
	0x0B,
	0x8C,
	0x10,
	0x8D,
	0x10,
	0x8E,
	0x10,
	0x8F,
	0x10,
	0x90,
	0x15,
	0x91,
	0x15,
	0x92,
	0x15,
	0x93,
	0x15,
	0x94,
	0x1A,
	0x95,
	0x1A,
	0x96,
	0x1A,
	0x97,
	0x1A,
	0x98,
	0x1E,
	0x99,
	0x1E,
	0x9A,
	0x1E,
	0x9B,
	0x1E,
	0x9C,
	0x23,
	0x9D,
	0x23,
	0x9E,
	0x23,
	0x9F,
	0x23,
	0xA0,
	0x27,
	0xA1,
	0x27,
	0xA2,
	0x27,
	0xA3,
	0x27,
	0xA4,
	0x2B,
	0xA5,
	0x2B,
	0xA6,
	0x2B,
	0xA7,
	0x2B,
	0xA8,
	0x2F,
	0xA9,
	0x2F,
	0xAA,
	0x2F,
	0xAB,
	0x2F,
	0xAC,
	0x32,
	0xAD,
	0x32,
	0xAE,
	0x32,
	0xAF,
	0x32,
	0xB0,
	0x35,
	0xB1,
	0x35,
	0xB2,
	0x35,
	0xB3,
	0x35,
	0xB4,
	0x38,
	0xB5,
	0x38,
	0xB6,
	0x38,
	0xB7,
	0x38,
	0xB8,
	0x3A,
	0xB9,
	0x3A,
	0xBA,
	0x3A,
	0xBB,
	0x3A,
	0xBC,
	0x3C,
	0xBD,
	0x3C,
	0xBE,
	0x3C,
	0xBF,
	0x3C,	// end grayscale settings
	0x38,
	0x74,
	0xAF 	// display on

};*/

const char vertical[] = {
0x80, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0xe0, 0xe0, 0xe0, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0xa0, 0xa0, 0xa0, 0x00, 0x80, 0xc0, 0xe0, 0x60, 0x20, 0x20, 0xe0, 0xe0, 0xe0, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0xe0, 0xe0, 0xe0, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0xe0, 0xe0, 0xe0, 0x00, 0x80, 0xc0, 0xe0, 0xe0, 0xe0, 0x40, 0xe0, 0xe0, 0xe0, 0xe0, 0xe0, 0xe0, 0xf8, 0xf8, 0xfc, 0xfe, 0xfe, 0xfe, 0xfe, 0xfc, 0xf8, 0xf0, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x01, 0x0f, 0x3f, 0xfc, 0xfe, 0xbf, 0x0f, 0x01, 0x00, 0x3f, 0x3f, 0x3f, 0x24, 0x2c, 0x3b, 0x3b, 0x1a, 0x00, 0x3f, 0x3f, 0x3f, 0x00, 0x1f, 0x3f, 0x3f, 0x31, 0x31, 0xff, 0xff, 0xff, 0x00, 0x19, 0x3d, 0x3d, 0x24, 0x26, 0x37, 0x37, 0x13, 0x00, 0x3f, 0x3f, 0x3f, 0x00, 0x0f, 0x1f, 0x3f, 0x30, 0x20, 0x20, 0x3f, 0x3f, 0x3f, 0x00, 0x00, 0x3f, 0x3f, 0x00, 0x3f, 0x3f, 0x3f, 0x00, 0x16, 0x37, 0x37, 0x24, 0x35, 0x3f, 0x1f, 0x0e, 0x01, 0x07, 0x1f, 0x3c, 0x3e, 0x1f, 0x07, 0x01, 0x00, 0x3f, 0x3f, 0x3f, 0x24, 0x2c, 0x3b, 0x3b, 0x1a, 0x00, 0x3f, 0x3f, 0x3f, 0x01, 0x3f, 0x3f, 0x3f, 0x00, 0x01, 0x0f, 0x3f, 0x3c, 0x3f, 0x07, 0x3f, 0x3c, 0x3f, 0x0f, 0x01, 0x00, 0x16, 0x37, 0x37, 0x24, 0x35, 0x3f, 0x1f, 0x0e, 0x00, 0x38, 0x3f, 0x3f, 0x1e, 0x0f, 0x03, 0x3f, 0x3f, 0x38, 0x10, 0x38, 0x78, 0xf0, 0xe0, 0xc0, 0x80, 0x03, 0x07, 0x1f, 0x1f, 0x1f, 0x1f, 0x1f, 0x0f, 0x0f, 0x07, 0x01, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfc, 0xfc, 0x1c, 0x00, 0xe1, 0xf1, 0x91, 0x90, 0x10, 0x70, 0x40, 0x00, 0xe0, 0xf0, 0x10, 0x10, 0xf0, 0xf0, 0x00, 0xc0, 0xe0, 0x30, 0x10, 0x10, 0x30, 0xe0, 0xc0, 0x00, 0xf4, 0xf4, 0x00, 0x00, 0x10, 0xfc, 0xfc, 0x10, 0x00, 0xe0, 0xf0, 0x90, 0x90, 0x10, 0x70, 0x40, 0x00, 0xe0, 0xf0, 0x10, 0x10, 0xf0, 0xf0, 0x00, 0x30, 0x10, 0x10, 0xf0, 0xf0, 0x00, 0x00, 0xc0, 0xe0, 0x90, 0x90, 0xb0, 0xe0, 0xc0, 0x00, 0x10, 0xfc, 0xfc, 0x10, 0x00, 0xe0, 0xf0, 0x10, 0x10, 0xf0, 0xf0, 0x00, 0x00, 0xfc, 0xfc, 0x1c, 0x1c, 0x1c, 0x1c, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x1c, 0x1c, 0x1c, 0x1c, 0x1c, 0x3c, 0x78, 0xf1, 0xe3, 0xc7, 0x8f, 0x0e, 0x1c, 0x38, 0x38, 0x38, 0x38, 0x38, 0xfe, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfe, 0x38, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x07, 0x00, 0x00, 0x07, 0x07, 0x04, 0x04, 0x05, 0x07, 0x03, 0x00, 0x07, 0x07, 0x00, 0x00, 0x07, 0x07, 0x00, 0x01, 0x03, 0x06, 0x04, 0x04, 0x06, 0x03, 0x01, 0x00, 0x07, 0x07, 0x00, 0x04, 0x04, 0x07, 0x03, 0x00, 0x00, 0x07, 0x07, 0x04, 0x04, 0x05, 0x07, 0x03, 0x00, 0x07, 0x07, 0x00, 0x00, 0x07, 0x07, 0x00, 0x00, 0x00, 0x00, 0x07, 0x07, 0x00, 0x00, 0x02, 0x06, 0x04, 0x04, 0x06, 0x03, 0x01, 0x04, 0x04, 0x07, 0x03, 0x00, 0x00, 0x07, 0x07, 0x00, 0x00, 0x07, 0x07, 0x00, 0x00, 0x07, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x03, 0x07, 0x0f, 0x1e, 0x3c, 0x78, 0xf0, 0xe0, 0xe0, 0xe0, 0xe1, 0xe1, 0xe3, 0xe3, 0xe3, 0xe1, 0xe1, 0xe0, 0xe0, 0xf8, 0xfc, 0xfe, 0xfe, 0xfe, 0xfe, 0xfc, 0xf8, 0xe0,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x07, 0x0f, 0x0f, 0x0f, 0x0f, 0x07, 0x03, 0x00,
0x00, 0x00, 0x00, 0x38, 0xc0, 0x00, 0x00, 0xe0, 0x18, 0xe0, 0x00, 0x00, 0xc0, 0x38, 0x00, 0x70, 0x88, 0x88, 0x88, 0x88, 0x88, 0xf8, 0x00, 0x00, 0xa0, 0x90, 0x88, 0x88, 0x08, 0x08, 0x10, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf8, 0x00, 0x00, 0x80, 0x60, 0x10, 0xf8, 0x00, 0x00, 0x70, 0x88, 0x88, 0x88, 0x88, 0x88, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x28, 0x48, 0x88, 0x08, 0x08, 0x00, 0x00, 0x00, 0xc0, 0x30, 0x08, 0x30, 0xc0, 0x00, 0x00, 0x00, 0xf0, 0x08, 0x08, 0x08, 0xf0, 0x00, 0x00, 0xf0, 0x08, 0x08, 0x08, 0xf0, 0x00, 0x00, 0x00, 0x00, 0xf8, 0x10, 0x20, 0x00, 0x00, 0xf0, 0x08, 0x08, 0x08, 0xf0, 0x00, 0x00, 0x90, 0x48, 0x48, 0x88, 0xf0, 0x00, 0x00, 0x00, 0x00, 0xf8, 0x10, 0x20, 0x00, 0x00, 0x20, 0x10, 0x08, 0x08, 0x08, 0x10, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xe0, 0x10, 0x08, 0x08, 0x08, 0x08, 0xf8, 0x00, 0x00, 0xf8, 0x80, 0x80, 0x80, 0x80, 0x80, 0xf8, 0x00, 0x00, 0xf8, 0x00, 0x00, 0x80, 0x60, 0x10, 0xf8, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x07, 0x08, 0x07, 0x00, 0x00, 0x00, 0x07, 0x08, 0x07, 0x00, 0x00, 0x07, 0x08, 0x08, 0x08, 0x08, 0x08, 0x0f, 0x00, 0x00, 0x07, 0x08, 0x08, 0x08, 0x08, 0x08, 0x04, 0x03, 0x00, 0x01, 0x01, 0x01, 0x01, 0x00, 0x0f, 0x04, 0x03, 0x00, 0x00, 0x00, 0x0f, 0x00, 0x08, 0x06, 0x01, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x00, 0x01, 0x01, 0x01, 0x01, 0x00, 0x08, 0x08, 0x08, 0x09, 0x0a, 0x0c, 0x00, 0x0c, 0x03, 0x01, 0x01, 0x01, 0x01, 0x01, 0x03, 0x0c, 0x00, 0x07, 0x08, 0x08, 0x08, 0x07, 0x00, 0x00, 0x07, 0x08, 0x08, 0x08, 0x07, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x07, 0x08, 0x08, 0x08, 0x07, 0x00, 0x00, 0x07, 0x08, 0x08, 0x08, 0x07, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x02, 0x04, 0x08, 0x08, 0x08, 0x04, 0x03, 0x00, 0x01, 0x01, 0x01, 0x01, 0x00, 0x03, 0x04, 0x08, 0x08, 0x08, 0x08, 0x0f, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x0f, 0x04, 0x03, 0x00, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0xe0, 0x00, 0xe0, 0x18, 0xe0, 0x00, 0xe0, 0x18, 0x00, 0x70, 0x48, 0x48, 0x48, 0xf0, 0x00, 0x00, 0xfa, 0x00, 0x02, 0x0c, 0x70, 0x80, 0x00, 0x80, 0x70, 0x0c, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfc, 0x02, 0x02, 0x02, 0xfc, 0x00, 0x00, 0xfc, 0x02, 0x02, 0x02, 0xfc, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0xe4, 0x12, 0x12, 0x22, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x70, 0x48, 0x48, 0x48, 0xf0, 0x00, 0x08, 0x30, 0xc0, 0x00, 0xc0, 0x30, 0x08, 0x00, 0xfa, 0x00, 0x08, 0x08, 0xfe, 0x08, 0x00, 0x10, 0x08, 0x08, 0x08, 0xf0, 0x00, 0x00, 0x70, 0x48, 0x48, 0x48, 0xf0, 0x00, 0x00, 0xfe, 0x00, 0x0a, 0x0a, 0xfc, 0x08, 0x00, 0x70, 0x48, 0x48, 0x48, 0xf0, 0x00, 0x00, 0x9c, 0x62, 0x22, 0x22, 0x22, 0x22, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x01, 0x02, 0x02, 0x02, 0x01, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x01, 0x02, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x02, 0x02, 0x02, 0x01, 0x00, 0x00, 0x01, 0x02, 0x02, 0x02, 0x01, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x01, 0x02, 0x02, 0x02, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x02, 0x02, 0x02, 0x01, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 0x02, 0x02, 0x01, 0x00, 0x00, 0x01, 0x02, 0x02, 0x02, 0x01, 0x00, 0x00, 0x01, 0x02, 0x02, 0x02, 0x01, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x01, 0x02, 0x02, 0x02, 0x01, 0x00, 0x02, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc4, 0x22, 0x22, 0x22, 0x22, 0x22, 0x1c, 0x00, 0x00, 0xfe, 0x20, 0x20, 0x20, 0x20, 0x20, 0xfe, 0x00, 0x00, 0xf0, 0x08, 0x08, 0x08, 0xf0, 0x00, 0x00, 0x9c, 0x62, 0x22, 0x22, 0x22, 0x22, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0x08, 0x08, 0x10, 0xf8, 0x00, 0x00, 0xf0, 0x08, 0x08, 0x10, 0xf0, 0x08, 0x08, 0x10, 0xf8, 0x00, 0x00, 0x70, 0x48, 0x48, 0x48, 0xf0, 0x00, 0x00, 0x02, 0x02, 0x02, 0xfe, 0x02, 0x02, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x70, 0x48, 0x48, 0x48, 0xf0, 0x00, 0x00, 0xfe, 0x10, 0x08, 0x08, 0xf0, 0x00, 0x00, 0xfa, 0x00, 0x00, 0x0e, 0xf0, 0x00, 0xc0, 0x38, 0x06, 0x38, 0xc0, 0x00, 0xf0, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x02, 0x02, 0x02, 0x02, 0x02, 0x01, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x01, 0x02, 0x02, 0x02, 0x01, 0x00, 0x02, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x02, 0x02, 0x01, 0x1f, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x01, 0x02, 0x02, 0x02, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x02, 0x02, 0x02, 0x01, 0x00, 0x00, 0x03, 0x01, 0x02, 0x02, 0x01, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x01, 0x02, 0x01, 0x00, 0x00, 0x00, 0x01, 0x02, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
};


const unsigned char XY_Vector[] =            // 16 Point 16-bit Sine Table
{
	0xB0,	//page
	0x10,
	0x02
};


const unsigned char dummy[] =            // 16 Point 16-bit Sine Table
{
	0xF0,	//page
	0xF0,
	0xF0,
	0xF0
};


static void t_delay (unsigned long i)
{
	unsigned long j = i*1000;

	while (j>0)
	{
		__no_operation();
		j--;
	}
}


unsigned char * block_ptr = 0;
unsigned int block_length = 0;

void block_tansfer_LCD(unsigned char A0, unsigned char * data, unsigned int length)
{

	block_ptr = data;
	block_length = length;

	IE2 |= UCB0TXIE;                          // Enable TX ready interrupt
	UCB0CTL1 |= UCTR + UCTXSTT;               // I2C TX, start condition
	UCB0TXBUF = A0;                        // Write DAC control byte
	__bis_SR_register(CPUOFF + GIE);          // Enter LPM0 w/ interrupts

	IE2 &= ~UCB0TXIE;                          // Disable TX ready interrupt

	while (UCB0CTL1 & UCTXSTT);             // Loop until I2C STT is sent
	UCB0CTL1 |= UCTXSTP;                    // I2C stop condition after 1st TX
	__bic_SR_register(GIE);          // Enter LPM0 w/ interrupts
}


void init_LCD(void)
{
	//block_tansfer_LCD(Comsend, (unsigned char *) Init_Vector, 157);
	block_tansfer_LCD(Comsend, (unsigned char *) Init_Vector1, 10);
	t_delay(2);
	block_tansfer_LCD(Comsend, (unsigned char *) Init_Vector2, 1);
	t_delay(2);
	block_tansfer_LCD(Comsend, (unsigned char *) Init_Vector3, 1);
	t_delay(2);
	block_tansfer_LCD(Comsend, (unsigned char *) Init_Vector4, 1);
	t_delay(2);
	block_tansfer_LCD(Comsend, (unsigned char *) Init_Vector5, 6);
	t_delay(200);
	block_tansfer_LCD(Comsend, (unsigned char *) Init_Vector6, 1);
	t_delay(200);
	block_tansfer_LCD(Comsend, (unsigned char *) Init_Vector7, 1);
	t_delay(200);
	block_tansfer_LCD(Comsend, (unsigned char *) Init_Vector8, 135);
	t_delay(2);

}

void show_LCD(void)
{
//	block_tansfer_LCD(Comsend, (unsigned char *) XY_Vector, 4);
//	block_tansfer_LCD(Datasend, (unsigned char *) dummy, 5);
	unsigned char n,i;
	unsigned char page_column[] = {0xB0,0x10,0x01};


	for(i=0;i<13;i++)
	{
		block_tansfer_LCD(Comsend, (unsigned char *) page_column, 3);
		for(n=0;n<160;n++)
		{

			block_tansfer_LCD(Datasend, (unsigned char *) dummy, 4);
			// Aumentar puntero de texto
		}
		page_column[0]++;

	}
}


/*****************************************************/

void main(void) {
	
	WDTCTL = WDTPW + WDTHOLD;                 // Stop Watchdog Timer

	P1SEL |= BIT6 + BIT7;                     // Assign I2C pins to USCI_B0
	P1SEL2|= BIT6 + BIT7;                     // Assign I2C pins to USCI_B0

	P2SEL &= ~(BIT4 + BIT5);
	P1SEL &= ~(BIT4 + BIT5);
	P2DIR |= (BIT4 + BIT5);
	P2OUT &= ~(BIT5);
	P2OUT |= BIT4;

	UCB0CTL1 |= UCSWRST;                      // Enable SW reset
	UCB0CTL0 = UCMST + UCMODE_3 + UCSYNC;     // I2C Master, synchronous mode
	UCB0CTL1 = UCSSEL_2 + UCSWRST;            // Use SMCLK, keep SW reset
	UCB0BR0 = 12;                             // fSCL = SMCLK/12 = ~100kHz
	UCB0BR1 = 0;
	UCB0I2CSA = 0x3F;                         // Set slave address
	UCB0CTL1 &= ~UCSWRST;                     // Clear SW reset, resume operation

	SET_RST;
	t_delay(100);
	SET_CSB;

	// Las interrupciones se habilitan dentro
	init_LCD();

	show_LCD();

	__bis_SR_register(CPUOFF);          // Enter LPM0 w/ interrupts

}







// USCI_B0 Data ISR
#pragma vector = USCIAB0TX_VECTOR
__interrupt void USCIAB0TX_ISR(void)
{
  static unsigned char ByteCtr;

  UCB0TXBUF = block_ptr[ByteCtr++];          // Transmit data byte

  if(ByteCtr>block_length)
  {
	  __bic_SR_register_on_exit(CPUOFF);        // Exit LPM0
	  ByteCtr=0;
  }

}

